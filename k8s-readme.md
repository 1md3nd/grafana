1. The k8s apiserver is ran via a background service in `pkg/server/k8s/service/service.go`
2. Cert is autogenerated and stored in `data/k8s/certs/*`
3. Created objects are stored in `data/k8s/crds/*`
4. Everything under pkg/server/k8s is copied from https://github.com/tilt-dev/tilt-apiserver with slight modifications to make it compile

To test:

```bash
kubectl --kubeconfig ./embedded-k8s-cfg.yml apply -f example-manifest.yml
kubectl --kubeconfig ./embedded-k8s-cfg.yml get manifest
```

---

TODO:

- The authorization doesn't work for some reason - certs do not give enough permissions to create k8s objects. As a workaround, I am configuring the apiserver with an always authorize policy:

```go
   Authorization = genericapiserver.AuthorizationInfo{
		Authorizer: authorizerfactory.NewAlwaysAllowAuthorizer(),
   }
```

from `pkg/server/k8s/start/start.go`
